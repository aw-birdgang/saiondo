@startuml
skinparam backgroundColor #FFFFFF
left to right direction

cloud CodePipeline {
    rectangle "CodeCommit" as codecommit
    rectangle "CodeBuild (Build)" as build1
    rectangle "Step Functions" as stepfn
    rectangle "CodeBuild (Post-Test)" as build2
    rectangle "CodeDeploy" as codedeploy
}

database "DynamoDB Table" as dynamodb1
database "DynamoDB Table" as dynamodb2
rectangle "Amazon ECS Task\n(Load Testing)" as ecs

codecommit --> build1 : commit
build1 --> stepfn : invoke
stepfn --> dynamodb1 : PutItem
stepfn --> ecs : Start Task
ecs --> dynamodb2 : GetItem
ecs --> build2 : return result
build2 --> codedeploy : deploy
@enduml
