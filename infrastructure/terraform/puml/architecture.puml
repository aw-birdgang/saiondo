@startuml
' 스타일
skinparam package {
  BackgroundColor #F8F8FF
  BorderColor #333366
  FontColor #222244
  FontSize 15
}
skinparam rectangle {
  BackgroundColor #F0F8FF
  BorderColor #333366
  FontColor #222244
}
skinparam ArrowColor #336699
skinparam ArrowFontColor #336699
skinparam ArrowFontSize 13

' 주요 패키지
package "Terraform Root" {
  [main.tf]
  [providers.tf]
  [terraform.tfvars]
}

package "dev 환경" {
  [vpc.tf]
  [ec2.tf]
  [securitygroup.tf]
  [s3.tf]
  [pipeline.tf]
  [variables.tf]
  [outputs.tf]
}

package "AWS 리소스" {
  [VPC]
  [Subnet]
  [InternetGateway]
  [RouteTable]
  [EC2]
  [SecurityGroup]
  [S3]
  [DynamoDB]
  [CodeBuild]
  [CodePipeline]
}

' 관계 및 설명
[main.tf] --> [AWS 리소스] : "글로벌 리소스 선언"
[providers.tf] --> [AWS 리소스] : "Provider/Region 설정"
[dev 환경] --> [AWS 리소스] : "환경별 리소스 선언"
[pipeline.tf] --> [CodeBuild] : "CI 빌드 자동화"
[pipeline.tf] --> [CodePipeline] : "CI/CD 파이프라인"
[ec2.tf] --> [EC2] : "앱 서버 배포"
[vpc.tf] --> [VPC] : "네트워크/VPC 구성"
[s3.tf] --> [S3] : "아티팩트/정적 파일 저장"
[securitygroup.tf] --> [SecurityGroup] : "보안그룹 관리"
@enduml
