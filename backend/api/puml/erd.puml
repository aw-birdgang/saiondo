@startuml
entity "User" as User {
  *id : String
  name : String
  email : String
  password : String
  birthDate : DateTime
  gender : Gender
  fcmToken : String
  point : Int
  walletId : String
  isSubscribed : Boolean
  subscriptionUntil : DateTime
}

entity "Wallet" as Wallet {
  *id : String
  address : String
  mnemonic : String
  privateKey : String
  tokenBalance : String
  derivationIndex : Int
}

entity "Channel" as Channel {
  *id : String
  inviteCode : String
  status : String
  startedAt : DateTime
  endedAt : DateTime
  anniversary : DateTime
  keywords : String
}

entity "ChannelMember" as ChannelMember {
  *id : String
  channelId : String
  userId : String
  role : String
  joinedAt : DateTime
}

entity "Assistant" as Assistant {
  *id : String
  userId : String
  channelId : String
}

entity "Chat" as Chat {
  *id : String
  assistantId : String
  channelId : String
  userId : String
  sender : String
  message : String
  createdAt : DateTime
}

entity "PersonaProfile" as PersonaProfile {
  *id : String
  userId : String
  categoryCodeId : String
  content : String
  isStatic : Boolean
  source : ProfileSource
  confidenceScore : Float
}

entity "CategoryCode" as CategoryCode {
  *id : String
  code : String
  description : String
}

entity "Advice" as Advice {
  *id : String
  channelId : String
  advice : String
  generatedById : String
}

entity "CoupleAnalysis" as CoupleAnalysis {
  *id : String
  channelId : String
  rawResult : String
}

entity "PushSchedule" as PushSchedule {
  *id : String
  userId : String
  scheduledAt : DateTime
  sentAt : DateTime
  status : PushStatus
}

entity "UserAnswer" as UserAnswer {
  *id : String
  pushScheduleId : String
  answerText : String
  createdAt : DateTime
}

' 관계 정의
User ||--o{ Wallet : ""
User ||--o{ ChannelMember : ""
User ||--o{ Assistant : ""
User ||--o{ Chat : ""
User ||--o{ PersonaProfile : ""
User ||--o{ PushSchedule : ""
User ||--o{ Advice : "generatedReports"
User ||--o{ UserAnswer : ""
Wallet ||--|| User : ""
Channel ||--o{ ChannelMember : ""
Channel ||--o{ Assistant : ""
Channel ||--o{ Chat : ""
Channel ||--o{ Advice : ""
Channel ||--o{ CoupleAnalysis : ""
ChannelMember }o--|| Channel : ""
ChannelMember }o--|| User : ""
Assistant }o--|| User : ""
Assistant }o--|| Channel : ""
Assistant ||--o{ Chat : ""
Chat }o--|| Assistant : ""
Chat }o--|| Channel : ""
Chat }o--|| User : ""
PersonaProfile }o--|| User : ""
PersonaProfile }o--|| CategoryCode : ""
CategoryCode ||--o{ PersonaProfile : ""
Advice }o--|| Channel : ""
Advice }o--|| User : "generatedBy"
CoupleAnalysis }o--|| Channel : ""
PushSchedule }o--|| User : ""
PushSchedule ||--o{ UserAnswer : ""
UserAnswer }o--|| PushSchedule : ""
@enduml
