# ğŸ˜ PostgreSQL ì‹¤ë¬´ ëª…ë ¹ì–´ & ìš´ì˜ íŒ (Saiondo í”„ë¡œì íŠ¸ ê¸°ì¤€)

Saiondo í”„ë¡œì íŠ¸ëŠ” **PostgreSQL**ì„ ì£¼ìš” ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.  
ì•„ë˜ëŠ” ì‹¤ë¬´ì—ì„œ ìì£¼ ì“°ëŠ” ëª…ë ¹ì–´, ìš´ì˜/ê°œë°œ í™˜ê²½ì—ì„œ ìœ ìš©í•œ íŒ, ê·¸ë¦¬ê³  í”„ë¡œì íŠ¸ì—ì„œ ì‹¤ì œë¡œ í™œìš©ë˜ëŠ” íŒ¨í„´ì„ ì •ë¦¬í•œ ê°€ì´ë“œì…ë‹ˆë‹¤.

---

## ğŸ“‹ ëª©ì°¨

- [1. ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì†](#1-ë°ì´í„°ë² ì´ìŠ¤-ì ‘ì†)
- [2. ë°ì´í„°ë² ì´ìŠ¤/í…Œì´ë¸”/ìŠ¤í‚¤ë§ˆ ì •ë³´](#2-ë°ì´í„°ë² ì´ìŠ¤í…Œì´ë¸”ìŠ¤í‚¤ë§ˆ-ì •ë³´)
- [3. ë°ì´í„° ì¡°íšŒ/ì¡°ì‘](#3-ë°ì´í„°-ì¡°íšŒì¡°ì‘)
- [4. ê¸°íƒ€ ìœ ìš©í•œ ëª…ë ¹ì–´](#4-ê¸°íƒ€-ìœ ìš©í•œ-ëª…ë ¹ì–´)
- [5. í…Œì´ë¸”/ì‹œí€€ìŠ¤/ì¸ë±ìŠ¤ ì‚­ì œ](#5-í…Œì´ë¸”ì‹œí€€ìŠ¤ì¸ë±ìŠ¤-ì‚­ì œ)
- [6. ê¶Œí•œ ë° ê³„ì • ê´€ë¦¬](#6-ê¶Œí•œ-ë°-ê³„ì •-ê´€ë¦¬)
- [7. ê°œë°œ/ìš´ì˜ í™˜ê²½ì—ì„œ ìì£¼ ì“°ëŠ” íŒ](#7-ê°œë°œìš´ì˜-í™˜ê²½ì—ì„œ-ìì£¼-ì“°ëŠ”-íŒ)
- [8. íŠ¸ëŸ¬ë¸”ìŠˆíŒ… & ì°¸ê³ ](#8-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…--ì°¸ê³ )

---

## 1. ë°ì´í„°ë² ì´ìŠ¤ ì ‘ì†

```bash
psql -U [ìœ ì €ëª…] -d [DBëª…] -h [í˜¸ìŠ¤íŠ¸] -p [í¬íŠ¸]
# ì˜ˆì‹œ (ë¡œì»¬ ê°œë°œ)
psql -U postgres -d saiondo_dev
# ì˜ˆì‹œ (Docker ì»¨í…Œì´ë„ˆ ë‚´ë¶€)
docker exec -it [ì»¨í…Œì´ë„ˆëª…] psql -U postgres -d saiondo_dev
```

---

## 2. ë°ì´í„°ë² ì´ìŠ¤/í…Œì´ë¸”/ìŠ¤í‚¤ë§ˆ ì •ë³´

| ëª…ë ¹ì–´         | ì„¤ëª…                        |
| -------------- | -------------------------- |
| \l             | ë°ì´í„°ë² ì´ìŠ¤ ëª©ë¡ ë³´ê¸°      |
| \c [DBëª…]      | DB ì ‘ì†/ë³€ê²½               |
| \dt            | í…Œì´ë¸” ëª©ë¡ ë³´ê¸°           |
| \d [í…Œì´ë¸”ëª…]  | í…Œì´ë¸” êµ¬ì¡°(DDL) ë³´ê¸°      |
| \dn            | ìŠ¤í‚¤ë§ˆ ëª©ë¡ ë³´ê¸°           |
| \df            | í•¨ìˆ˜ ëª©ë¡ ë³´ê¸°             |
| \dv            | ë·°(View) ëª©ë¡ ë³´ê¸°         |
| \di            | ì¸ë±ìŠ¤ ëª©ë¡ ë³´ê¸°           |
| \du            | ìœ ì €(ë¡¤) ëª©ë¡ ë³´ê¸°         |
| \ds            | ì‹œí€€ìŠ¤ ëª©ë¡ ë³´ê¸°           |

---

## 3. ë°ì´í„° ì¡°íšŒ/ì¡°ì‘

```sql
SELECT * FROM [í…Œì´ë¸”ëª…];         -- í…Œì´ë¸” ì „ì²´ ì¡°íšŒ
SELECT COUNT(*) FROM [í…Œì´ë¸”ëª…];  -- í–‰ ê°œìˆ˜ ì„¸ê¸°
INSERT INTO [í…Œì´ë¸”ëª…] (...) VALUES (...); -- ë°ì´í„° ì‚½ì…
UPDATE [í…Œì´ë¸”ëª…] SET ... WHERE ...;       -- ë°ì´í„° ìˆ˜ì •
DELETE FROM [í…Œì´ë¸”ëª…] WHERE ...;          -- ë°ì´í„° ì‚­ì œ
```

---

## 4. ê¸°íƒ€ ìœ ìš©í•œ ëª…ë ¹ì–´

| ëª…ë ¹ì–´         | ì„¤ëª…                        |
| -------------- | -------------------------- |
| \q             | psql ì¢…ë£Œ                  |
| \?             | psql ëª…ë ¹ì–´ ë„ì›€ë§         |
| \h [ëª…ë ¹ì–´]    | SQL ë¬¸ë²• ë„ì›€ë§            |
| \x             | ê²°ê³¼ë¥¼ ê°€ë¡œ/ì„¸ë¡œ ì „í™˜      |
| \timing        | ì¿¼ë¦¬ ì‹¤í–‰ ì‹œê°„ í‘œì‹œ        |
| \set           | ë³€ìˆ˜ ì„¤ì •                  |
| \password      | ë¹„ë°€ë²ˆí˜¸ ë³€ê²½              |

---

## 5. í…Œì´ë¸”/ì‹œí€€ìŠ¤/ì¸ë±ìŠ¤ ì‚­ì œ

```sql
DROP TABLE [í…Œì´ë¸”ëª…] CASCADE;    -- ì˜ì¡´ ê°ì²´ê¹Œì§€ ì‚­ì œ
DROP SEQUENCE [ì‹œí€€ìŠ¤ëª…];
DROP INDEX [ì¸ë±ìŠ¤ëª…];
```

---

## 6. ê¶Œí•œ ë° ê³„ì • ê´€ë¦¬

```sql
-- DB ê¶Œí•œ ë¶€ì—¬
GRANT ALL PRIVILEGES ON DATABASE [DBëª…] TO [ìœ ì €ëª…];
GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO [ìœ ì €ëª…];

-- ìƒˆ ìœ ì € ìƒì„± ë° ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
CREATE USER [ìœ ì €ëª…] WITH PASSWORD '[ë¹„ë°€ë²ˆí˜¸]';

-- ìŠˆí¼ìœ ì € ê¶Œí•œ ë¶€ì—¬ (ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ì£¼ì˜)
ALTER USER [ìœ ì €ëª…] WITH SUPERUSER;
```

---

## 7. ê°œë°œ/ìš´ì˜ í™˜ê²½ì—ì„œ ìì£¼ ì“°ëŠ” íŒ

- **ë§ˆì´ê·¸ë ˆì´ì…˜/ìŠ¤í‚¤ë§ˆ ê´€ë¦¬**  
  - Prisma, TypeORM, Django ë“± ORMì„ ì“¸ ê²½ìš°, ë§ˆì´ê·¸ë ˆì´ì…˜ ëª…ë ¹ì–´ë¡œ ìŠ¤í‚¤ë§ˆ ê´€ë¦¬  
  - ì˜ˆì‹œ: `npx prisma migrate dev`  
- **ë°±ì—…/ë³µì›**  
  - ë°±ì—…: `pg_dump -U [ìœ ì €ëª…] -d [DBëª…] > backup.sql`
  - ë³µì›: `psql -U [ìœ ì €ëª…] -d [DBëª…] < backup.sql`
- **Docker í™˜ê²½**  
  - `docker-compose exec db psql -U postgres -d saiondo_dev`
- **ì‹¤í–‰ ì¤‘ ì¿¼ë¦¬ í™•ì¸**  
  - `SELECT * FROM pg_stat_activity;`
- **DB ì—°ê²° ì •ë³´ í™•ì¸**  
  - `.env` ë˜ëŠ” `config` íŒŒì¼ ì°¸ê³  (ì˜ˆ: `DATABASE_URL=postgresql://...`)
- **ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬**  
  - `COPY` ëª…ë ¹ì–´ë¡œ ëŒ€ëŸ‰ ë°ì´í„° import/export  
    - ì˜ˆì‹œ:  
      - Import: `COPY [í…Œì´ë¸”ëª…] FROM '/ê²½ë¡œ/íŒŒì¼.csv' DELIMITER ',' CSV HEADER;`
      - Export: `COPY [í…Œì´ë¸”ëª…] TO '/ê²½ë¡œ/íŒŒì¼.csv' DELIMITER ',' CSV HEADER;`
- **SQL ëª…ë ¹ì–´ëŠ” ì„¸ë¯¸ì½œë¡ (;)ìœ¼ë¡œ ëë‚˜ì•¼ ì‹¤í–‰ë©ë‹ˆë‹¤.**

---

## 8. íŠ¸ëŸ¬ë¸”ìŠˆíŒ… & ì°¸ê³ 

- **í¬íŠ¸ ì¶©ëŒ**: ê¸°ë³¸ í¬íŠ¸(5432) ì‚¬ìš© ì¤‘ì´ë©´ docker-composeì—ì„œ í¬íŠ¸ ë³€ê²½
- **ì ‘ì† ê±°ë¶€**:  
  - `pg_hba.conf`/`postgresql.conf` ì„¤ì • í™•ì¸
  - ë°©í™”ë²½/ë„¤íŠ¸ì›Œí¬ ì •ì±… í™•ì¸
- **ëŒ€ìš©ëŸ‰ ë°ì´í„°/ì„±ëŠ¥**:  
  - ì¸ë±ìŠ¤, íŒŒí‹°ì…”ë‹, ì¿¼ë¦¬ ìµœì í™”, ì‹¤í–‰ê³„íš(`EXPLAIN`) í™œìš©
- **ì‹¤í–‰ ì¤‘ ì¿¼ë¦¬ ê°•ì œ ì¢…ë£Œ**:  
  - `SELECT pg_terminate_backend(pid) FROM pg_stat_activity WHERE ...;`
- **íŠ¸ëœì­ì…˜/ë½ ë¬¸ì œ**:  
  - ë½ í™•ì¸: `SELECT * FROM pg_locks;`
  - íŠ¸ëœì­ì…˜ ê°•ì œ ì¢…ë£Œ: ìœ„ ì¿¼ë¦¬ í™œìš©

---

## ì°¸ê³ 

- psql í”„ë¡¬í”„íŠ¸ì—ì„œ `\?`ë¡œ ë” ë§ì€ ëª…ë ¹ì–´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ê³µì‹ ë¬¸ì„œ: [PostgreSQL Documentation](https://www.postgresql.org/docs/)
- ORM/ë§ˆì´ê·¸ë ˆì´ì…˜ ë„êµ¬ë³„ ëª…ë ¹ì–´ëŠ” ê° ëª¨ë“ˆì˜ README ì°¸ê³ 
