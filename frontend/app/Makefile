# Saiondo Flutter App - Makefile
# Provides convenient commands for development

.PHONY: help install format analyze test test-coverage clean build-web build-android build-ios setup-hooks check-quality run-dev run-prod

# Default target
help:
	@echo "ğŸš€ Saiondo Flutter App - Available Commands"
	@echo ""
	@echo "ğŸ“¦ Setup & Installation:"
	@echo "  install        Install dependencies"
	@echo "  setup-hooks    Setup git hooks for code quality"
	@echo ""
	@echo "ğŸ” Code Quality:"
	@echo "  format         Format all Dart code"
	@echo "  analyze        Run static analysis"
	@echo "  check-quality  Run comprehensive code quality checks"
	@echo ""
	@echo "ğŸ§ª Testing:"
	@echo "  test           Run all tests"
	@echo "  test-coverage  Run tests with coverage report"
	@echo ""
	@echo "ğŸƒâ€â™‚ï¸ Running:"
	@echo "  run-dev        Run app in development mode"
	@echo "  run-prod       Run app in production mode"
	@echo ""
	@echo "ğŸ—ï¸ Building:"
	@echo "  build-web      Build for web"
	@echo "  build-android  Build for Android"
	@echo "  build-ios      Build for iOS"
	@echo ""
	@echo "ğŸ§¹ Maintenance:"
	@echo "  clean          Clean build artifacts"
	@echo "  codegen        Generate code (build_runner)"
	@echo ""

# Setup & Installation
install:
	@echo "ğŸ“¦ Installing dependencies..."
	flutter pub get
	@echo "âœ… Dependencies installed!"

setup-hooks:
	@echo "ğŸ”§ Setting up git hooks..."
	@chmod +x scripts/setup_git_hooks.sh
	./scripts/setup_git_hooks.sh

# Code Quality
format:
	@echo "ğŸ¨ Formatting code..."
	@chmod +x scripts/format_code.sh
	./scripts/format_code.sh

analyze:
	@echo "ğŸ” Running static analysis..."
	flutter analyze

check-quality:
	@echo "ğŸ” Running comprehensive code quality checks..."
	@chmod +x scripts/check_code_quality.sh
	./scripts/check_code_quality.sh

# Testing
test:
	@echo "ğŸ§ª Running tests..."
	@chmod +x scripts/run_tests.sh
	./scripts/run_tests.sh

test-coverage:
	@echo "ğŸ“Š Running tests with coverage..."
	@chmod +x scripts/run_tests.sh
	./scripts/run_tests.sh --coverage

# Running
run-dev:
	@echo "ğŸš€ Running app in development mode..."
	flutter run --flavor development

run-prod:
	@echo "ğŸš€ Running app in production mode..."
	flutter run --flavor production

# Building
build-web:
	@echo "ğŸŒ Building for web..."
	flutter build web
	@echo "âœ… Web build completed!"

build-android:
	@echo "ğŸ¤– Building for Android..."
	flutter build apk --release
	@echo "âœ… Android build completed!"

build-ios:
	@echo "ğŸ Building for iOS..."
	flutter build ios --release
	@echo "âœ… iOS build completed!"

# Maintenance
clean:
	@echo "ğŸ§¹ Cleaning build artifacts..."
	flutter clean
	flutter pub get
	@echo "âœ… Clean completed!"

codegen:
	@echo "ğŸ”§ Generating code..."
	flutter pub run build_runner build --delete-conflicting-outputs
	@echo "âœ… Code generation completed!"

# Pre-commit workflow
pre-commit: format analyze test
	@echo "âœ… Pre-commit checks completed!"

# CI/CD workflow
ci: install check-quality test-coverage
	@echo "âœ… CI checks completed!"

# Development workflow
dev-setup: install setup-hooks
	@echo "âœ… Development setup completed!"

# Quick development cycle
dev-cycle: format analyze test
	@echo "âœ… Development cycle completed!" 